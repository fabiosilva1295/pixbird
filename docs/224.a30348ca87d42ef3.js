"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[224],{1224:(y,d,o)=>{o.r(d),o.d(d,{GameModule:()=>b});var l=o(6895),c=o(1523),s=o(1571);let g=(()=>{class n{static#t=this.\u0275fac=function(t){return new(t||n)};static#s=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-header"]],decls:3,vars:0,consts:[[1,"container-header"],[1,"coin"],["src","assets/sprites/coin.png","width","40"]],template:function(t,i){1&t&&(s.TgZ(0,"div",0)(1,"div",1),s._UZ(2,"img",2),s.qZA()())},styles:[".container-header[_ngcontent-%COMP%]{width:100%;height:70px;background:#03447a;position:absolute;display:flex}.coin[_ngcontent-%COMP%]{width:auto;height:100%;padding:1rem}"]})}return n})(),u=(()=>{class n{constructor(){this.counter=0,this.attemps=0,this.spending=0,this.moves=0}static#t=this.\u0275fac=function(t){return new(t||n)};static#s=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-counter"]],inputs:{counter:"counter",attemps:"attemps",spending:"spending",moves:"moves"},decls:8,vars:4,template:function(t,i){1&t&&(s.TgZ(0,"h1"),s._uU(1),s.qZA(),s.TgZ(2,"h1"),s._uU(3),s.qZA(),s.TgZ(4,"h1"),s._uU(5),s.qZA(),s.TgZ(6,"h1"),s._uU(7),s.qZA()),2&t&&(s.xp6(1),s.hij("VIRTUAIS ACUMULADAS ",i.counter,""),s.xp6(2),s.hij("VIRTUAIS GASTAS ",i.spending,""),s.xp6(2),s.hij("REAIS ",i.attemps,""),s.xp6(2),s.hij("JOGADAS ",i.moves,""))},styles:["h1[_ngcontent-%COMP%]{font-family:Flappy Bird Regular;color:#fff;font-size:40px;-webkit-text-stroke:1px #333232}"]})}return n})();const m=["canvas"],w=[{path:"",component:(()=>{class n{constructor(){this.frames=0,this.sprites=new Image,this.activeScreen={},this.RAD=Math.PI/180,this.state={points:3,attemps:0,moves:0,spending:0},this.sounds={hit:new Audio("/assets/audio/hit.wav"),point:new Audio("/assets/audio/point.wav"),swoosh:new Audio("/assets/audio/swoosh.wav"),die:new Audio("/assets/audio/die.wav"),wing:new Audio("/assets/audio/wing.wav")},this.readMensage={sx:134,sy:0,width:174,height:152,dx:0,dy:250,draw:()=>{this.context.drawImage(this.sprites,this.readMensage.sx,this.readMensage.sy,this.readMensage.width,this.readMensage.height,this.readMensage.dx,this.readMensage.dy,this.readMensage.width,this.readMensage.height)}},this.background={sx:390,sy:0,width:275,height:204,dx:0,dy:0,draw:()=>{this.context.fillStyle="#70c5ce",this.context.fillRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.context.drawImage(this.sprites,this.background.sx,this.background.sy,this.background.width,this.background.height,this.background.dx,this.background.dy,this.background.width,this.background.height),this.context.drawImage(this.sprites,this.background.sx,this.background.sy,this.background.width,this.background.height,this.background.dx+this.background.width,this.background.dy,this.background.width,this.background.height)}},this.floor={},this.bird={},this.pipes={},this.screen={width:0,heigth:0},this.screens={GAME_OVER:{selected:!0,draw:()=>{this.background.draw(),this.pipes.draw(),this.floor.draw(),this.bird.draw()},update:()=>{this.bird.update()},click:()=>{this.changeScreen(this.screens.HOME)}},HOME:{init:()=>{this.onCreateBird(),this.onCreateFloor(),this.onCreatePipes(),this.setInitialState()},draw:()=>{this.background.draw(),this.floor.draw(),this.bird.draw(),this.readMensage.draw()},update:()=>{this.floor.update()},click:()=>{this.state.points>0?(this.state.points--,this.state.spending++):this.state.attemps++,this.state.moves++,this.changeScreen(this.screens.GAME),this.sounds.swoosh.play(),this.onClick()}},GAME:{draw:()=>{this.background.draw(),this.pipes.draw(),this.floor.draw(),this.bird.draw()},click:()=>{this.bird.jump()},update:()=>{this.bird.update(),this.floor.update(),this.pipes.update()}}}}ngOnInit(){this.screen.width=window.innerWidth,this.screen.height=window.innerHeight,window.addEventListener("keydown",e=>{this.onClick()})}ngAfterViewInit(){this.context=this.canvas.nativeElement.getContext("2d"),this.sprites.src="assets/sprites.png",this.changeScreen(this.screens.HOME),this.loop()}setInitialState(){this.floor.dy=this.screen.height-this.floor.height,this.background.dy=this.screen.height-this.background.height,this.readMensage.dx=this.screen.width/2-this.readMensage.width/2,this.bird.animations[0].src="/assets/sprites/yellowbird-downflap.png",this.bird.animations[1].src="/assets/sprites/yellowbird-midflap.png",this.bird.animations[2].src="/assets/sprites/yellowbird-upflap.png"}loop(){this.activeScreen.draw(),this.activeScreen.update(),this.frames++,requestAnimationFrame(()=>this.loop())}changeScreen(e){this.activeScreen=e,this.activeScreen.init&&this.activeScreen.init()}onClick(){this.activeScreen.click&&this.activeScreen.click()}onColision(e,t){return e.y-10>=t.dy}onCreateBird(){const e={animations:[{src:new Image},{src:new Image},{src:new Image}],width:51.5,height:34,gravity:.08,speed:0,jumpForce:3.2,rotation:0,thrust:8.6,atualFrame:0,x:100,y:350,jump:()=>{this.sounds.wing.load(),this.sounds.wing.play(),this.bird.speed=-this.bird.jumpForce},updateAtualFrame:()=>{this.frames%12==0&&(this.bird.atualFrame=(1+this.bird.atualFrame)%this.bird.animations.length)},update:()=>{this.onColision(this.bird,this.floor)&&this.activeScreen.selected?this.changeScreen(this.screens.GAME_OVER):(this.onColision(this.bird,this.floor)&&(this.sounds.hit.play(),this.changeScreen(this.screens.GAME_OVER)),this.bird.y+=this.bird.speed,this.bird.setRotation(),this.bird.speed+=this.bird.gravity)},draw:()=>{this.bird.updateAtualFrame();const t=new Image;t.src=this.bird.animations[this.bird.atualFrame].src,this.context.save(),this.context.translate(this.bird.x,this.bird.y),this.context.rotate(this.bird.rotatation*this.RAD),this.context.drawImage(t,0,0,this.bird.width,this.bird.height,-this.bird.width,-this.bird.height/2,this.bird.width,this.bird.height),this.context.restore()},setRotation:()=>{this.bird.speed<=0?this.bird.rotatation=Math.max(-25,-25*this.bird.speed/(-1*this.bird.thrust)):this.bird.speed>0&&(this.bird.rotatation=Math.min(90,90*this.bird.speed/(2*this.bird.thrust)))}};this.bird=e}onCreateFloor(){const e={sx:0,sy:610,width:224,height:112,dx:0,dy:0,update:()=>{e.dx=(e.dx-2)%(e.width/2)},draw:()=>{for(let t=0;t<this.screen.width/this.floor.width+1;t++)this.context.drawImage(this.sprites,this.floor.sx,this.floor.sy,this.floor.width,this.floor.height,this.floor.dx+this.floor.width*t,this.floor.dy,this.floor.width,this.floor.height)}};this.floor=e}onCreatePipes(){const e={sprites:new Image,width:102,height:600,gap:98,top:{sx:104,sy:0,dx:0,dy:0},bottom:{sx:0,sy:0,dx:0,dy:0},pairs:[],draw:()=>{this.pipes.pairs.forEach(t=>{this.pipes.sprites.src="assets/pipesSprites.png";const i=t.y,h=t.x,a=i,r=t.x,p=i+this.pipes.gap+this.pipes.height;this.context.drawImage(this.pipes.sprites,this.pipes.top.sx,this.pipes.top.sy,this.pipes.width,this.pipes.height,h,a,this.pipes.width,this.pipes.height),this.context.drawImage(this.pipes.sprites,this.pipes.bottom.sx,this.pipes.bottom.sy,this.pipes.width,this.pipes.height,r,p,this.pipes.width,this.pipes.height),t.top={x:h,y:this.pipes.height+a},t.bottom={x:r,y:parseFloat(p)},t.pass=!1})},onColision:t=>{if(!this.pipes.pairs.length)return!1;const i=Math.floor(this.bird.y),h=Math.min(this.bird.y+this.bird.height);if(this.bird.x-15>=t.x-30&&t.x>-40){if(i<=t.top.y+15&&this.bird.x-5>t.top.x)return console.log("colidiu","[bird top",i,"[pipe top]",t.top.y),!0;if(h>=t.bottom.y+25&&this.bird.x-5>t.bottom.x)return console.log("colidiu","[bottom bird]",h,"[bottom pipe]",t.bottom.y),!0}else t.x<-90&&(this.pipes.pairs.shift(),this.sounds.point.play(),this.state.points++);return!1},update:()=>{if(this.frames%160==0){const i=this.getRandom();this.pipes.pairs.push({x:this.canvas.nativeElement.width,y:i})}this.pipes.pairs.forEach(i=>{i.x-=2,this.pipes.onColision(i)&&(this.changeScreen(this.screens.GAME_OVER),this.sounds.hit.play(),this.sounds.die.play()),i.x+this.pipes.width<=0&&this.pipes.pairs.shift()})}};this.pipes=e}getRandom(){let e=0,t=0;return this.screen.width<400?(e=250,t=180):(e=250,t=50),-310*Math.min(Math.random()+.5,1.8)}static#t=this.\u0275fac=function(t){return new(t||n)};static#s=this.\u0275cmp=s.Xpm({type:n,selectors:[["app-game"]],viewQuery:function(t,i){if(1&t&&s.Gf(m,5),2&t){let h;s.iGM(h=s.CRH())&&(i.canvas=h.first)}},decls:5,vars:6,consts:[[1,"screen"],[3,"moves","spending","attemps","counter"],["id","canvas",3,"width","height","click"],["canvas",""]],template:function(t,i){1&t&&(s.TgZ(0,"div",0),s._UZ(1,"app-header")(2,"app-counter",1),s.TgZ(3,"canvas",2,3),s.NdJ("click",function(){return i.onClick()}),s.qZA()()),2&t&&(s.xp6(2),s.Q6J("moves",i.state.moves)("spending",i.state.spending)("attemps",i.state.attemps)("counter",i.state.points),s.xp6(1),s.Q6J("width",i.screen.width)("height",i.screen.height))},dependencies:[g,u],styles:[".screen[_ngcontent-%COMP%]{width:100vw;height:100vh;background:#47a4f0;display:flex;flex-direction:column;justify-content:end;align-items:center;overflow:hidden;position:relative}.screen[_ngcontent-%COMP%]   app-header[_ngcontent-%COMP%]{width:100%}.screen[_ngcontent-%COMP%]   app-counter[_ngcontent-%COMP%]{position:absolute;top:70px}.screen[_ngcontent-%COMP%]   #canvas[_ngcontent-%COMP%]{background:none;border-radius:5px;border:1px solid #333}"]})}return n})()}];let f=(()=>{class n{static#t=this.\u0275fac=function(t){return new(t||n)};static#s=this.\u0275mod=s.oAB({type:n});static#i=this.\u0275inj=s.cJS({imports:[c.Bz.forChild(w),c.Bz]})}return n})(),b=(()=>{class n{static#t=this.\u0275fac=function(t){return new(t||n)};static#s=this.\u0275mod=s.oAB({type:n});static#i=this.\u0275inj=s.cJS({imports:[l.ez,f]})}return n})()}}]);